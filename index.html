<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script>
        const stopwords = 'a an and at but by for in nor of on or so the to up yet via off per as if'
        const defaults = stopwords.split(' ')

        /**
         * Convert a value to AP/APA title case.
         *
         * @param {string} [value]
         *   Short text of unknown casing.
         * @param {Options} [options]
         *   Configuration (optional).
         * @returns {string}
         *   Title-cased version of `value`.
         */
        function apa_style_title_case(value, options) {
          const configuration = options || {}

          if (!value) return ''

          const stop = configuration.stopwords || defaults
          const keep = configuration.keepSpaces
          const splitter = /(\s+|[-‑–—,:;!?()])/

          return value
            .split(splitter)
            .map((word, index, all) => {
              // console.info("word: "+word + ", index: "+index);
              // The splitter:
              if (index % 2) {
                  if (/\s+/.test(word)) return keep ? word : ' '
                  return word
              }

              // 3.冒号、长破折号、句号后的第一个单词首字母大写
              if (index - 3 > 0 && all[index-3] == ':'){
                  return capitalize(word)
              }

              const lower = word.toLowerCase()

              if (index !== 0 && index !== all.length - 1 && stop.includes(lower)) {
                return lower
              }
              return capitalize(word)
            })
            .join('')
        }

        /**
         * 首字母大写
         * @param {string} value
         * @returns {string}
         */
        function capitalize(value) {
          return value.charAt(0).toUpperCase() + value.slice(1)
        }

        title_list = [
            '5 Reasons You Need to Start Using Free Dating Sites Now',
            '3 Best Discreet Dating Sites: The Biggest Secret to Find a Partner',
            'Single Mature Women: The Reality of Romance During Your Golden Years',
            'Dating Someone Who Is Separated but Not Divorced: What You Need to Know',
            'Single And Divorced Dating Apps: The Top 5 Best App that You Should Download',
            'MeetMe Dating Site: Why Meetme Is The Best Dating Site For Young People',
            '100 Percent Free Asian Dating Sites: The 3 Best One For Finding True Love',
            'Dating a Divorced Man in His 40S: You Really Need to Understand About in 2023',
            'Mature Single Ladies: What Should You Do When Dating With Her?',
            'Young Women Seeking Older Men: The Best Way for Them (Updated for 2023)',
            'Dating During Divorce: What You Need To Know In 2022',
            'Mature Single Ladies Near Me: Tips for How to Find This in 2023',
            '100% Free Online Dating Sites For Local Singles',
            'Top 10 100 Percent Free Senior Dating Sites',
            'Ukrainebride4u: The Best Ukrainian Dating Sites',
            'Chatting With Singles Online: The Best And Worst Dating Websites',
            'Real Mature Singles Dating Site Review: Is This Site Worth Your Time?',
            'Dating Apps and Sites For Divorced And Single People',
            '100 Percent Free Online Dating for Seniors Over 50 in 2022',
            'Is It Necessary To Wait For Your Divorce To Be Final?',

            'The Best Dating Sites For Introverts For 2023',
            'Dating a Divorced Man In His 50s: 6 Things to Know Before (Updated For 2023)',
            'Long-lasting Relationship: 10 Principles for This',
            'Spend Time:14 Suggestions on How to Spend More Time as a Couple',
            '10 Relationship Red Flags You Should Not Ignore',
            'Date Ideas: Top 15 Original, Creative, and Fun Date Ideas for Couples',
            'What to Do if Your Relationship Is Boring',
            'How to Have a Loyal Relationship',
            'Core Need: How to Recognize Your Core Needs in a Relationship',
            'Talk Before Marriage: 5 Talks You Should Have With Your Partner Before Marriage',
            'Dating: How to Let Go of a Loved One',
            'Therapy Activities:6 Couples Therapy Activities You Can Do With Your Partner',
            'Online Dating Advice: 12 Advice for Online Dating From Real Women Who Found Their Soul Mates Online',
            'End Relationship: 6 Things That Will Always End a Relationship',
            'Dating Advice: I Wish I Had Adhered to These 15 Dating Advice While I Was Single',
            '5 Proven Advice on How to Have More Fun Around Men',
            "8 Factors That Make Men's Online Dating More Difficult",
            'This Holiday Season, Online Dating Is Different but Still Feasible',
            "Wherever You Go, We'll Help You Find Love",
            '10 Ideal Open Lines for Online Dating',

            'Fun and Flirty Summer Date for Singles',
            '10 Hidden Signs to Tell if He Wants an Open Relationship',
            '10 Ways to Feel Specialized in a Long-Distance Relationship',
            'Avoidant Love:12 Symptoms of Avoidant Love',
            'Eye Contact Anxiety:10 Ways to Avoid Eye Contact Anxiety in Relationships',
            '7 Signs That Your Partner May No Longer Be Interested in Your Relationship',
            'The Importance of Commitment in Relationships',
            'What Does Love Feels Like? 12 Feelings That Come with Love',
            'Love: What Is It?',
            '20 Characteristics of Great Relationships',
            'Top 10 Signs That a Relationship Is Healthy',
            'Things to Do in a Relationship If You Feel Undervalued',
            "You're Dating a Mean Person If...",
            'Things You Need to Know About Interracial Dating',
            '5 Reliable Advice for Dating After Divorce',
            '10 Dating Advice for Those Who Have Never Been in a Relationship',
            '15 Ways to Establish Boundaries in a New Relationship',
            '15 Obvious Signs of True Love after a Breakup',
            'The Role and Value of Romance in a Relationship You Need to Know',
            '7 Dating Rules That Will Help You Find Your Ideal Partner',

            '10 Best Suggestions for Dating a Divorce',
            '5 Important Things to Think About Before You Date Again After Divorce',
            'Advice for Dating While Not Divorced but Separated',
            '5 Expert Tips for Men Who Are Dating Again After Divorce',
            'Top 10 Fighting Rules for Couples',
            'Tips for How to Deal with a Narcissist',
            'How to Repair a Broken Relationship',
            'Relationship Issues: 10 Causes of Common',
            'Top 10 Signs You Are Having a Healthy Relationship',
            '10 First Date Questions to Make the Conversation Go Smoothly',
            'Dating an Anxious Person? These 10 Ways Can Help Both You and Them',
            'How Long Does It Take to Meet the Other Half',
            'Top 10 Techniques for Spotting and Avoiding Online Dating Scams',
            'Why Is Dating So Difficult? Ten Reasons and Suggestions for Overcoming Them',
            '10 Tested Ways for Search Love Online',
            'Ten Sexy Tricks to Feel More Present During Sex',
            '10 Disastrous First Dates that Will Make You Laugh',
            '10 Self-Assurance Tricks to Make You Attractive During Dating',
            "10 Simple Valentine's Day Displays of Love for Your Date",
            '10 Ways for Casual Dating Success',

            'Ten Bad Mistakes People Make in Dating App',
            '10 Unusual Ways to Use Dating Apps',
            '10 Benefits and Drawbacks of Summer Dates',
            'Ten Dating Behaviors We All Should Try to Change',
            '10 Self-Assessment Questions to Consider Before Delivering an Ultimatum',
            'Ten Ground Rules for Dating Younger Men',
            'Top 10 Online Dating Pickup Lines to Use as a First Message on the Apps',
            'Top 10 Strategies for Handling Deceptive Online Dating Images',
            '10 Surprising Reasons Why Online Dating Can Help You Connect',
            'Relationship Stages That the Majority of Couples Will Experience (Updated For 2023)',
            'Top 10 Things to Think About Before Drinking on a First Date',
            'Top 10 Ways for Handling Discrimination on Online Dating',
            '10 Signs Your Relationship is Over',
            'Which Is Right for You: Dating or Relationships?',
            '10 Ways to Date Yourself for the Purpose of Self-Love',
            '10 Reasons for Why Younger Men Date Older Women',
            'Top 10 Ways for Going Out from a Bad Date',
            '10 Things About Free-Spirited Dating You Always Wanted to Know',
            '10 Interesting Reasons for Men’s Disappearing When They Like You',
            '10 Ways to Start Dating Without Apps',

            "10 Things You Need to Know Before Your New Year's First Date",
            '10 Tips to Prevent Uncomfortable Situations on Dating Apps',
            'What Do Unicorns Mean When Dating? 10 Things to Know Before You Try It',
            '10 Unique Ideas for Dating That Help You Make Unforgettable Memories',
            '10 Qualities Older Women Want in a Man',
            '10 Ways to Indulge Your Boyfriend in a Long-Distance Relationship',
            '10 Reasons Why Winter is the Right Time for Online Dating',
            '10 Essential Guidelines for Dating Younger Men',
            'What Causes Pick-Up Lines to Be Effective?',
            'Date on a Tight Budget? 10 Budget-Friendly Date Ideas',
            'Tips for Dating in Your 30s',
            'Dating Younger Men: 8 Pros and Cons of Older Women Dating Younger Men',
            'How to Find Your Life Partner Online?',
            '8 Signs Tell You Your Casual Relationship Is Turning Serious',
            'When to Move from Dating to a Relationship',
            '8 Important Dating Advice for the Seniors',
            '10 Disastrous First Dates That Will Make You Laughing',
            'Top 10 Covid-Safe Ideas for Valentine’s Daydates',
            "5 Indications That You're Prepared to Date Again After a Breakup",
            'Top Ten Tips to Make Your Dating Profile Stand Out',

            '10 Important Green Flags When Dating in the Talking Stage',
            'Effective Communication Strategies in Causal Relationship',
            'The Advantages of Casual Dating',
            'How to Explore Online Dating Sites',
            '8 Tips You Need to Know About Casual Dating',
            'What Is Casual Dating?',
            'Advices for a Happy Serious Relationship',
            'Things That You Should Do After the First Date',
            'Lines to Use to Make Online Dating More Fun',
            'Online Dating: Why is it So Popular?',
            'Risks of Online Dating You Should Keep In Mind',
            'How to Date Online Safely?',
            'The Best Reasons to Date Online',
            'Choosing Profile Photos That Could Tell Your Story Virtually and Emotionally',
            'Conversations on Online Dating Can Be Very Easy',
            'How to Choose a Lifetime Partner',
            'Things You Need to Know about Saying Love',
            "Advice for Online Dating You'll ever need!",
            'Zoosk Dating Review 2022',
            '5 Apps Like Grindr: Alternative Dating Apps for LGBTQ in 2022',
        ]
        for (var title of title_list) {
            d = apa_style_title_case(title);
            if(d === title){
              // console.info(title);
              // console.info(d+" ✔️");
            }else{
              console.info(title);
              console.info(d);
            }
        };
    </script>
    <script>
    $(document).ready(function(){
        // 标题自动进行 APA 格式化
        $("#title").on('keyup', function(e){
            if(e.keyCode == 37 || e.keyCode == 39) {
                return
            }
            var title = $(this).val();
            title = apa_style_title_case(title);
            var pos = $(this).getCursorPosition();
            $(this).val(title);
            // $(this).attr('style', 'color:green');
            setCaretPosition($(this)[0], pos);
        });
    });
    
    //获取光标位置
    (function ($, undefined) {
        $.fn.getCursorPosition = function () {
            var el = $(this).get(0);
            var pos = 0;
            if ('selectionStart' in el) {
                pos = el.selectionStart;
            } else if ('selection' in document) {
                el.focus();
                var Sel = document.selection.createRange();
                var SelLength = document.selection.createRange().text.length;
                Sel.moveStart('character', -el.value.length);
                pos = Sel.text.length - SelLength;
            }
            return pos;
        }
    })(jQuery);
    /**
     * 定位光标
     */
    function setCaretPosition(ctrl, pos){
        if(ctrl.setSelectionRange)
        {
            ctrl.focus();
            ctrl.setSelectionRange(pos,pos);
        }
        else if (ctrl.createTextRange) {
            var range = ctrl.createTextRange();
            range.collapse(true);
            range.moveEnd('character', pos);
            range.moveStart('character', pos);
            range.select();
        }
    }
    </script>
</head>
<body>
    
    <input type="text" id="title" style="width:500px">

</body>
</html>
